<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>La Riconquista – Guida Completa per Tornare con la Tua Ex</title>

  <style>
    * {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      background: #f0f4f8;
      color: #222;
      line-height: 1.6;
    }
    header {
      background: #0056b3;
      color: white;
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    header h1 {
      font-size: 2rem;
    }
    nav a {
      color: white;
      text-decoration: none;
      margin-left: 1.5rem;
      font-weight: 600;
      transition: color 0.3s ease;
    }
    nav a:hover {
      color: #ffcc00;
    }
    main {
      max-width: 1100px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    section {
      margin-bottom: 3rem;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    h2 {
      color: #0056b3;
      margin-bottom: 1rem;
      border-bottom: 3px solid #ffcc00;
      display: inline-block;
      padding-bottom: 0.3rem;
    }
    p {
      margin-bottom: 1rem;
    }
    ul {
      margin-left: 1.3rem;
      margin-bottom: 1rem;
    }
    ul li {
      margin-bottom: 0.5rem;
    }
    .image-rect {
      width: 100%;
      max-height: 300px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 1.5rem;
      display: block;
    }
    .preview-img {
      width: 48%;
      max-height: 200px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 1.5rem;
      filter: blur(3px);
      opacity: 0.7;
      transition: filter 0.3s ease, opacity 0.3s ease;
      cursor: pointer;
      display: inline-block;
      margin-right: 4%;
    }
    .preview-img:last-child {
      margin-right: 0;
    }
    .preview-img:hover {
      filter: none;
      opacity: 1;
    }
    form {
      max-width: 450px;
      margin: 0 auto 1.5rem auto;
    }
    label {
      display: block;
      margin-bottom: 0.3rem;
      font-weight: 600;
      color: #333;
    }
    input[type="text"],
    input[type="email"],
    textarea {
      width: 100%;
      padding: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
    }
    textarea {
      resize: vertical;
      min-height: 80px;
    }
    .checkbox-label {
      font-weight: 400;
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    button {
      background-color: #0056b3;
      color: white;
      font-weight: 600;
      padding: 0.7rem 1.5rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
      display: block;
      width: 100%;
      margin-top: 0.5rem;
      text-align: center;
    }
    button:disabled {
      background-color: #999;
      cursor: not-allowed;
    }
    footer {
      text-align: center;
      padding: 1.5rem 1rem;
      background: #222;
      color: #eee;
      font-size: 0.9rem;
    }
    @media (max-width: 600px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      nav a {
        margin-left: 0;
        margin-right: 1rem;
        margin-top: 0.5rem;
      }
      .preview-img {
        width: 100%;
        margin-right: 0;
        margin-bottom: 1rem;
      }
    }
    #reviewsList {
      max-width: 600px;
      margin: 1rem auto 0 auto;
      padding-left: 0;
      list-style-type: none;
    }
    #reviewsList li {
      background: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    #reviewsList li strong {
      display: block;
      margin-bottom: 0.3rem;
      color: #0056b3;
    }
  </style>
</head>
<body>
  <header>
    <h1>La Riconquista</h1>
    <nav>
      <a href="#intro">Chi Siamo</a>
      <a href="#perche">Perché Acquistare</a>
      <a href="#guida">Guida</a>
      <a href="#acquisto">Acquista</a>
      <a href="#recensioni">Recensioni</a>
    </nav>
  </header>

  <main>
    <section id="intro" aria-label="Chi Siamo">
      <h2>Chi Siamo</h2>
      <img src="https://massipazzi.github.io/riconquistalatuaex/logo-riconquista.png" alt="Logo La Riconquista" class="image-rect" />
      <p>
        Ciao, sono Carlo Zimbone. Dopo anni di esperienza personale e professionale nello studio delle dinamiche relazionali e della psicologia della riconquista, ho deciso di mettere a disposizione questa guida pratica e senza fronzoli per aiutarti a tornare con la tua ex — o a chiudere definitivamente con consapevolezza.
      </p>
      <p>
        Qui non troverai teorie astratte o promesse vuote, ma un percorso concreto, basato su strategie collaudate e ricerca scientifica, per riprendere il controllo della tua vita amorosa senza perdere tempo o dignità.
      </p>
    </section>

    <section id="perche" aria-label="Perché acquistare la guida">
      <h2>Perché Acquistare la Guida</h2>
      <ul>
        <li>✅ Basata su casi reali</li>
        <li>✅ Niente fuffa, solo strategia</li>
        <li>✅ Accesso immediato dopo il pagamento</li>
      </ul>
    </section>

    <section id="guida" aria-label="Descrizione Guida Completa">
      <h2>La Guida Completa</h2>
      <img src="https://massipazzi.github.io/riconquistalatuaex/copertina-pdf.png" alt="Copertina PDF La Riconquista" class="image-rect" />
      <p>La guida è suddivisa in 6 sezioni:</p>
      <ul>
        <li><strong>Comprendere la rottura</strong></li>
        <li><strong>No Contact Strategico</strong></li>
        <li><strong>Ricostruzione del Sé</strong></li>
        <li><strong>Primo Contatto</strong></li>
        <li><strong>Re-ingaggio & Test</strong></li>
        <li><strong>Decisione Finale</strong></li>
      </ul>

      <div style="display:flex; justify-content: space-between; gap:1rem; flex-wrap: wrap;">
        <img src="https://massipazzi.github.io/riconquistalatuaex/screenshot1.png" alt="Anteprima pagina 1 guida" class="preview-img" />
        <img src="https://massipazzi.github.io/riconquistalatuaex/screenshot2.png" alt="Anteprima pagina 2 guida" class="preview-img" />
      </div>
    </section>

    <section id="acquisto" aria-label="Acquista la Guida">
      <h2>Acquista la Guida</h2>
      <p><strong>Prezzo:</strong> 3,99 € – Pagamento sicuro con PayPal</p>

      <form id="purchaseForm" onsubmit="return false;">
        <label for="nome">Nome</label>
        <input type="text" id="nome" name="nome" required autocomplete="given-name" />

        <label for="cognome">Cognome</label>
        <input type="text" id="cognome" name="cognome" required autocomplete="family-name" />

        <label for="email">Email</label>
        <input type="email" id="email" name="email" required autocomplete="email" />

        <label class="checkbox-label" for="privacyCheckbox">
          <input type="checkbox" id="privacyCheckbox" required />
          Accetto il trattamento dei dati personali come da <a href="https://massipazzi.github.io/privacy.html" target="_blank" rel="noopener noreferrer">Privacy Policy</a>.
        </label>

        <button type="submit" id="purchaseBtn" disabled>Acquista Ora</button>
      </form>

      <div id="paypal-button-container" style="margin-top:1rem;"></div>
    </section>

    <section id="recensioni" aria-label="Recensioni">
      <h2>Recensioni dai nostri utenti</h2>

      <form id="reviewForm" onsubmit="return false;" style="max-width:450px; margin:auto 0 2rem 0;">
        <label for="reviewName">Nome</label>
        <input type="text" id="reviewName" name="reviewName" required />

        <label for="reviewText">Recensione</label>
        <textarea id="reviewText" name="reviewText" required></textarea>

        <button type="submit">Invia Recensione</button>
      </form>

      <ul id="reviewsList"></ul>
    </section>
  </main>

  <footer>
    <p>Segnala un problema con l'email: <a href="mailto:wavelinesurfline@gmail.com">wavelinesurfline@gmail.com</a></p>
    <p>&copy; 2025 La Riconquista – Sig. Carlo Zimbone – Tutti i diritti riservati</p>
  </footer>

  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=BAA-FndWkHegW__79TuIQF3dEOyT6e7kM0nAIAwKTm3MKY5XISLwDus81KHvCwyXG8px7H2LTsfFWsDOQI&currency=EUR"></script>

  <script>
    // Abilita/disabilita bottone Acquista Ora in base checkbox privacy
    const privacyCheckbox = document.getElementById('privacyCheckbox');
    const purchaseBtn = document.getElementById('purchaseBtn');
    const purchaseForm = document.getElementById('purchaseForm');

    privacyCheckbox.addEventListener('change', () => {
      purchaseBtn.disabled = !privacyCheckbox.checked;
    });

    purchaseForm.addEventListener('submit', e => {
      e.preventDefault();
      if (!purchaseForm.checkValidity()) {
        alert('Compila tutti i campi e accetta la Privacy Policy.');
        return;
      }
      alert('Modulo compilato correttamente. Procedi con il pagamento PayPal sotto.');
    });

    // PayPal Smart Buttons integration
    paypal.Buttons({
      style: {
        layout: 'vertical',
        color:  'blue',
        shape:  'rect',
        label:  'pay'
      },
      createOrder: function(data, actions) {
        // Crea un ordine con prezzo fisso di 3,99 EUR
        return actions.order.create({
          purchase_units: [{
            amount: {
              value: '3.99'
            }
          }]
        });
      },
      onApprove: function(data, actions) {
        // Quando il pagamento è approvato
        return actions.order.capture().then(function(details) {
          alert('Pagamento completato da ' + details.payer.name.given_name + '. Il download partirà ora.');
          // Forza il download del PDF dal link Dropbox (dl=1)
          window.location.href = "https://www.dropbox.com/scl/fi/acm2v3su6ie5j8wuzrkjj/La_Riconquista_1.pdf?rlkey=861wslpdq0w5lkaj5bmr04x7x&dl=1";
        });
      },
      onError: function (err) {
        alert('Errore durante il pagamento: ' + err);
      }
    }).render('#paypal-button-container');

    // Sezione recensioni con localStorage e recensioni di default
    const reviewForm = document.getElementById('reviewForm');
    const reviewsList = document.getElementById('reviewsList');

    const defaultReviews = [
      { name: "Luca R.", text: "Questa guida è stata una svolta. Precisa, diretta e senza inutili giri di parole." },
      { name: "Marco S.", text: "Ho seguito i consigli e ho ottenuto risultati concreti in poche settimane." },
      { name: "Giulia M.", text: "Finalmente un percorso realistico e basato su casi reali. Lo consiglio a chi vuole fare sul serio." },
      { name: "Alessandro P.", text: "La strategia No Contact spiegata bene ha cambiato tutto nel mio approccio." },
      { name: "Federica T.", text: "Chiara, onesta e efficace. Niente fuffa, solo metodo." },
      { name: "Davide L.", text: "I consigli sono molto pratici e applicabili subito. Non è la solita teoria." },
      { name: "Elena G.", text: "Ho ritrovato fiducia grazie a questa guida. Mi ha aiutata a ricostruire me stessa." },
      { name: "Stefano C.", text: "Ben strutturata, supportata da ricerca e soprattutto funziona davvero." },
      { name: "Sara F.", text: "Finalmente una guida che ti dice come stanno le cose, senza menate." },
      { name: "Matteo D.", text: "Non avrei mai pensato che una guida potesse fare la differenza, ma questa sì." }
    ];

    function loadReviews() {
      const stored = localStorage.getItem('reviews');
      let reviews;

      if (!stored) {
        reviews = defaultReviews;
        localStorage.setItem('reviews', JSON.stringify(reviews));
      } else {
        reviews = JSON.parse(stored);
      }

      reviewsList.innerHTML = '';
      reviews.forEach(r => {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${r.name}</strong><p>${r.text}</p>`;
        reviewsList.appendChild(li);
      });
    }

    function saveReview(name, text) {
      const stored = localStorage.getItem('reviews');
      let reviews = stored ? JSON.parse(stored) : defaultReviews.slice();
      reviews.unshift({ name, text });
      localStorage.setItem('reviews', JSON.stringify(reviews));
    }

    reviewForm.addEventListener('submit', () => {
      const name = document.getElementById('reviewName').value.trim();
      const text = document.getElementById('reviewText').value.trim();

      if (name && text) {
        saveReview(name, text);
        loadReviews();
        reviewForm.reset();
        alert('Grazie per la tua recensione!');
      }
    });

    loadReviews();
  </script>
</body>
</html>
